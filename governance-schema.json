{
	"title": "VIP governance rules JSON schema",
	"$schema": "https://json-schema.org/draft-07/schema",
	"definitions": {
		"allowedBlocksArray": {
			"description": "Array of allowed blocks for this rule. Blocks can contain asterisks for pattern matching.",
			"type": "array",
			"items": {
				"type": "string",
				"examples": [
					"core/*",
					"core/paragraph",
					"core/heading"
				]
			}
		},
		"ruleDefaultProperties": {
			"type": "object",
			"properties": {
				"type": {
					"description": "Default rule - applies additively to all users.",
					"type": "string",
					"enum": [ "default" ]
				},
				"allowedBlocks": {
					"$ref": "#/definitions/allowedBlocksArray"
				},
				"blockSettings": {
					"type": "object",
					"default": {},
					"required": [],
					"properties": {}
				}
			},
			"required": [ "type" ],
			"additionalProperties": false
		},
		"ruleRoleProperties": {
			"type": "object",
			"properties": {
				"type": {
					"description": "Role rule - applies to one or more specific roles.",
					"type": "string",
					"enum": [ "role" ]
				},
				"roles": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"examples": [
						[ "administrator", "editor" ]
					]
				},
				"allowedBlocks": {
					"$ref": "#/definitions/allowedBlocksArray"
				},
				"blockSettings": {
					"type": "object",
					"default": {},
					"required": [],
					"properties": {}
				}
			},
			"required": [ "type", "roles" ],
			"additionalProperties": false
		}
	},
	"type": "object",
	"default": {},
	"required": [
		"rules"
	],
	"properties": {
		"$schema": {
			"description": "JSON schema URI for governance JSON",
			"type": "string"
		},
		"rules": {
			"description": "Array of governance rules",
			"type": "array",
			"default": [],
			"items": {
				"type": "object",
				"oneOf": [
					{ "$ref": "#/definitions/ruleDefaultProperties" },
					{ "$ref": "#/definitions/ruleRoleProperties" }
				]
			}
		}
	},
	"additionalProperties": false
}
